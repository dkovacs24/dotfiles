# include in .bashrc or .zshrc with `source /path/to/this/file`

# most of the stuff is from https://pastebin.com/hZzV308p

alias sudo="sudo " # need it for aliases to work with sudo
alias cd..="cd .." # fix/prevent cd mishaps

# auto cd TODO: add zsh version
#shopt -s autocd

# Make a directory, then go there
if [[ $(echo $SHELL | grep "zsh") ]]; then
    unalias md #incase oh-my-zsh adds another md alias and this md func throws an exception
fi
md () {
    test -n "$1" || return
    mkdir -pv "$1" && cd "$1"
}

# Default parameters
alias df="df -h --exclude=squashfs"
alias grep="grep --color=auto"
alias wget="wget -c"
alias mkdir="mkdir -pv"
alias diff="diff -W $(tput cols)"
## confirmation
alias mv="mv -iv"
alias cp="cp -iv"
alias ln="ln -iv"
## Preventing changes on /
alias rm="rm -I --preserve-root"
alias chmod="chmod -c --preserve-root"
alias chown="chown -c --preserve-root"
alias chgrp="chgrp -c --preserve-root"

# """""Custom""""" and shorter commands
alias wtfismyip="echo 'IPv4'; curl -sS -m 5 https://ipv4.yaml.myip.wtf; echo; echo 'IPv6'; curl -sS -m 5 https://ipv6.yaml.myip.wtf"
ls_params="-lFh --time-style=long-iso --color=auto"
alias la="ls -a $ls_params"
alias ll="ls $ls_params"
alias l="la"
alias c="clear"
alias h="history"
alias j="jobs -l"
alias back="cd $OLDPWD"
alias lsmount="mount | column -t"
alias lsports="netstat -tulanp"
alias time="/usr/bin/time -p"
alias empty="truncate --size 0"
alias dc="docker compose"
alias sc="sudo systemctl"

cheat () {
    joined_args=$(echo "$@" | tr ' ' '-')
    curl -sS cheat.sh/$joined_args
}

update-mirrors () {
    if [[ ! -z $(command -v rate-mirrors) && ! -z $(command -v pacman) ]]; then
        rate-mirrors --protocol https --entry-country HU arch | sudo tee /etc/pacman.d/mirrorlist
    else
        echo "Install rate-mirrors or you don't have pacman"
    fi
}

# doas
if [ -f /usr/bin/doas ]; then
	#complete -cf doas # bash only
    alias doas="doas "
	alias sudo="doas "
fi

# Manage packages easier TODO: add support for other package managers
if [ -f /usr/bin/apt ]; then
    alias update="sudo apt update"
    alias upgrade="sudo apt update && sudo apt full-upgrade"
    alias install="sudo apt install"
fi
 
if [ -f /usr/bin/pacman ]; then
    alias update="sudo pacman -Sy"
    alias upgrade="sudo pacman -Syu"
    alias install="sudo pacman -S"
fi


